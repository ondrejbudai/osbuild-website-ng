"use strict";(self.webpackChunkosbuild_website_ng=self.webpackChunkosbuild_website_ng||[]).push([[6381],{3905:(e,t,r)=>{r.d(t,{Zo:()=>m,kt:()=>k});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=a.createContext({}),s=function(e){var t=a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},m=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),d=s(r),c=n,k=d["".concat(i,".").concat(c)]||d[c]||u[c]||o;return r?a.createElement(k,l(l({ref:t},m),{},{components:r})):a.createElement(k,l({ref:t},m))}));function k(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,l=new Array(o);l[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p[d]="string"==typeof e?e:n,l[1]=p;for(var s=2;s<o;s++)l[s]=r[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},3036:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var a=r(7462),n=(r(7294),r(3905));const o={},l="RPM Repository Snapshots",p={unversionedId:"developer-guide/testing-strategy/rpmrepo",id:"developer-guide/testing-strategy/rpmrepo",title:"RPM Repository Snapshots",description:"For reliable continuous development, the OSBuild project employs its own RPM",source:"@site/docs/developer-guide/testing-strategy/rpmrepo.md",sourceDirName:"developer-guide/testing-strategy",slug:"/developer-guide/testing-strategy/rpmrepo",permalink:"/osbuild-website-ng/docs/developer-guide/testing-strategy/rpmrepo",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/developer-guide/testing-strategy/rpmrepo.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Testing strategy",permalink:"/osbuild-website-ng/docs/developer-guide/testing-strategy/"},next:{title:"Workflow",permalink:"/osbuild-website-ng/docs/developer-guide/workflow"}},i={},s=[{value:"Target Repositories",id:"target-repositories",level:2},{value:"Usage",id:"usage",level:2},{value:"Access",id:"access",level:2}],m={toc:s},d="wrapper";function u(e){let{components:t,...r}=e;return(0,n.kt)(d,(0,a.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"rpm-repository-snapshots"},"RPM Repository Snapshots"),(0,n.kt)("p",null,"For reliable continuous development, the OSBuild project employs its own RPM\nrepository snapshots. These snapshots are persistent and immutable. They are\nmeant to be used by test farms, CI systems, and other development tools, in\ncase the official RPM repositories are not suitable."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"WARNING"),": These snapshots are not meant for production use! No guarantee of\nsafety, applicability, or fitness for a particular purpose is made. No security\nfixes are applied to the repositories!")),(0,n.kt)("h2",{id:"target-repositories"},"Target Repositories"),(0,n.kt)("p",null,"The authoritative list of repositories that we target can be found in the\n",(0,n.kt)("inlineCode",{parentName:"p"},"./repo/")," subdirectory of the ",(0,n.kt)("inlineCode",{parentName:"p"},"rpmrepo")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"https://github.com/osbuild/rpmrepo/tree/main/repo\n")),(0,n.kt)("p",null,"This directory contains a configuration for each target repository, including\nthe Base-URL that will be sourced for snapshots. The following list contains an\noverview (possibly outdated) of the repositories we create snapshots for:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Platform"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Version"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Architectures"),(0,n.kt)("th",{parentName:"tr",align:null},"Lifetime"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Fedora"),(0,n.kt)("td",{parentName:"tr",align:"center"},"31"),(0,n.kt)("td",{parentName:"tr",align:"center"},"x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"(obsolete)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Fedora"),(0,n.kt)("td",{parentName:"tr",align:"center"},"32"),(0,n.kt)("td",{parentName:"tr",align:"center"},"x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"(obsolete)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Fedora"),(0,n.kt)("td",{parentName:"tr",align:"center"},"33"),(0,n.kt)("td",{parentName:"tr",align:"center"},"x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"12 months")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Fedora"),(0,n.kt)("td",{parentName:"tr",align:"center"},"34"),(0,n.kt)("td",{parentName:"tr",align:"center"},"x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"12 months")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Fedora"),(0,n.kt)("td",{parentName:"tr",align:"center"},"35"),(0,n.kt)("td",{parentName:"tr",align:"center"},"x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"12 months")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RHEL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"8.2"),(0,n.kt)("td",{parentName:"tr",align:"center"},"aarch64, ppc64le, s390x, x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"infinite?")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RHEL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"8.3"),(0,n.kt)("td",{parentName:"tr",align:"center"},"aarch64, ppc64le, s390x, x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"infinite?")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RHEL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"8.4"),(0,n.kt)("td",{parentName:"tr",align:"center"},"aarch64, ppc64le, s390x, x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"infinite?")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RHEL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"8.5"),(0,n.kt)("td",{parentName:"tr",align:"center"},"aarch64, ppc64le, s390x, x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"infinite?")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RHEL"),(0,n.kt)("td",{parentName:"tr",align:"center"},"9.0"),(0,n.kt)("td",{parentName:"tr",align:"center"},"aarch64, ppc64le, s390x, x86","_","64"),(0,n.kt)("td",{parentName:"tr",align:null},"infinite?")))),(0,n.kt)("p",null,"Each target repository has an ID-string that identifies it (which also is the\nfilename of its target configuration file in the ",(0,n.kt)("inlineCode",{parentName:"p"},"./repo/")," directory). Whenever\na snapshot is created, the snapshot will be identified by that ID-string\nsuffixed with the date it was created (and possibly some other suffix\nidentifiers)."),(0,n.kt)("p",null,"An enumeration of all available snapshots of all target repositories can be\nretrieved via:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"$ curl -s https://rpmrepo.osbuild.org/v2/enumerate | jq .\n")),(0,n.kt)("p",null,"For a given target repository ID-string like ",(0,n.kt)("inlineCode",{parentName:"p"},"el9-x86_64-baseos-n9.0"),", the list\nof available snapshots can be queried via:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"$ curl -s https://rpmrepo.osbuild.org/v2/enumerate/el9-x86_64-baseos-n9.0 | jq .\n")),(0,n.kt)("h2",{id:"usage"},"Usage"),(0,n.kt)("p",null,"We provide an RPM repository for every snapshot, accessible via\n",(0,n.kt)("inlineCode",{parentName:"p"},"rpmrepo.osbuild.org"),". The ",(0,n.kt)("em",{parentName:"p"},"Base URL")," for a given snapshot is:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"https://rpmrepo.osbuild.org/v2/mirror/<storage>/<platform>/<snapshot>/\n")),(0,n.kt)("p",null,"The parameters are:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Key"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Value"),(0,n.kt)("th",{parentName:"tr",align:"center"},"Examples"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("em",{parentName:"td"},"\\<storage",">")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"public"),", ",(0,n.kt)("em",{parentName:"td"},"rhvpn")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"public"),", ",(0,n.kt)("em",{parentName:"td"},"rhvpn"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("em",{parentName:"td"},"\\<platform",">")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"f\\<num",">"),", ",(0,n.kt)("em",{parentName:"td"},"el\\<num",">")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"f33"),", ",(0,n.kt)("em",{parentName:"td"},"el8"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("em",{parentName:"td"},"\\<snapshot",">")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"\\<tag",">")),(0,n.kt)("td",{parentName:"tr",align:"center"},(0,n.kt)("em",{parentName:"td"},"f33-x86","_","64-devel-20201010"))))),(0,n.kt)("p",null,"The ",(0,n.kt)("em",{parentName:"p"},"storage")," key selects the actual data store. Available storage includes\n",(0,n.kt)("em",{parentName:"p"},"public")," for the anonymous, public storage, ",(0,n.kt)("em",{parentName:"p"},"rhvpn")," for data on Red Hat private\ninfrastructure. The ",(0,n.kt)("em",{parentName:"p"},"platform")," key groups the data by platform, required for\ndata lifetime management. The ",(0,n.kt)("em",{parentName:"p"},"snapshot")," key selects the individual snapshot."),(0,n.kt)("p",null,"Note that not all data is available on all storage locations and platforms. If\nyou select the wrong combination, you will get ",(0,n.kt)("em",{parentName:"p"},"404")," replies. As a general\nrule, you should select the platform based on the snapshot name (e.g., for the\nsnapshot ",(0,n.kt)("em",{parentName:"p"},"f33-x86","_","64-devel-20201010")," you should use ",(0,n.kt)("em",{parentName:"p"},"f33")," as platform). As\nstorage selector, you should use ",(0,n.kt)("em",{parentName:"p"},"public")," for all publicly available data,\n",(0,n.kt)("em",{parentName:"p"},"rhvpn")," for Red Hat internal data."),(0,n.kt)("p",null,"For instance, to access the F33 snapshot ",(0,n.kt)("em",{parentName:"p"},"f33-x86","_","64-fedora-202103231401"),", use:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"https://rpmrepo.osbuild.org/v2/mirror/public/f33/f33-x86_64-fedora-202103231401/\n")),(0,n.kt)("p",null,"To access the EL8.2 snapshot ",(0,n.kt)("em",{parentName:"p"},"el8-x86","_","64-baseos-r8.2-202103231359"),", use:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"https://rpmrepo.osbuild.org/v2/mirror/rhvpn/el8/el8-x86_64-baseos-r8.2-202103231359/\n")),(0,n.kt)("h2",{id:"access"},"Access"),(0,n.kt)("p",null,"By default, all snapshots are publicly available, unless they contain\nconfidential or proprietary data. If you decide to use these snapshots, please\ncontact the OSBuild Developers and give us a short notice, so we can track the\nusers and communicate upcoming changes:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"RPMrepo Issue Tracker"),": ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/osbuild/rpmrepo/issues"},"@GitHub"))))}u.isMDXComponent=!0}}]);